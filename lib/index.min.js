!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("collo",[],e):"object"==typeof exports?exports.collo=e():n.collo=e()}(this,function(){return function(n){function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var t={};return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=0)}([function(n,e,t){"use strict";function o(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._collection=n||[],this.nextFn=function(){},this.errorFn=function(){},this.next=function(n){return e.nextFn=function(e){n(e)},e},this.error=function(n){return e.errorFn=function(e){n(e)},e};var o=this,c="Invalid input type. Input must be an object",i="Item not found in the collection",u=t||{};return o.promisify=function(){return u.promisify=!0,e},o.unPromisify=function(){return u.promisify=!1,e},o._isObject=function(n){return n&&"object"===(void 0===n?"undefined":r(n))&&Object.keys(n).length},o._getTheIndexOf=function(n){var e=!1,t=Object.keys(n)[0];return o._collection.forEach(function(o,r){o[t]===n[t]&&(e=r)}),e},o._onSuccess=function(n,e){return o.nextFn(o._collection),e.promisify?new Promise(function(e,t){e(n)}):n},o._onFail=function(n,e){return o.errorFn(null,n),e.promisify?new Promise(function(e,t){t(null,n)}):null},o.getTheIndexOf=function(n){if(o._isObject(n)){var e=o._getTheIndexOf(n);return e?o._onSuccess(e,u):o._onFail({Error:i},u)}return o._onFail({Error:c},u)},o.list=function(){return o._onSuccess(o._collection,u)},o.findWhere=function(n){if(o._isObject(n)){var e=o._collection.filter(function(e){var t=Object.keys(n)[0];return e[t]&&e[t]===n[t]})[0];return e?o._onSuccess(e,u):o._onSuccess(null,u)}return o._onFail({Error:c},u)},o.exists=function(n){return o._isObject(n)?o._onSuccess(!!o._getTheIndexOf(n),u):o._onFail({Error:c},u)},o.insert=function(n){return o._isObject(n)?(o._collection.push(n),o._onSuccess(o._collection,u)):o._onFail({Error:c},u)},o.insertAtIndex=function(n,e){return o._isObject(n)?(o._collection.splice(e,0,n),o._onSuccess(o._collection,u)):o._onFail({Error:c},u)},o.upsert=function(n,e){return o._isObject(n)&&o._isObject(e)?(o._getTheIndexOf(n)?o._collection=o._collection.map(function(t){var o=Object.keys(n)[0];return t[o]===n[o]?Object.assign({},t,e):t}):o.insert(e),o._onSuccess(o._collection,u)):o._onFail({Error:c},u)},o.removeWhere=function(n){if(o._isObject(n)){var e=o._getTheIndexOf(n);return e?(o._collection.splice(e,1),o._onSuccess(o._collection,u)):o._onFail({Error:i},u)}return o._onFail({Error:c},u)},o.updateWhere=function(n,e){return o._isObject(n)&&o._isObject(n)?(o._collection=o._collection.map(function(t){var o=Object.keys(n)[0];return t[o]===n[o]?Object.assign({},t,e):t}),o._onSuccess(o._collection,u)):o._onFail({Error:c},u)},this}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};e.default=o}])});